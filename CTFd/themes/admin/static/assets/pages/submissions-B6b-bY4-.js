import{$ as i,z as g,u as r,y as u,C as d}from"./main-D-CPTZMf.js";window.carouselPosition=0;window.carouselMax=0;async function f(t){let e=t.id;console.log(e);let s;try{s=JSON.parse(e)}catch{}if(s){let o=!1;for(let l=0;l<s.length;l++)if(console.log(s[l]),s[l].type=="thumbsnail"){console.log(s[l].type),console.log(s[l].location),o=!0;let n=w(s[l]);n.style.width="50px",n.style.height="auto",t.appendChild(n),t.onclick=h}if(!o){let l=document.createElement("p");l.textContent="No thumbsnail Available for the current media",t.appendChild(l)}}else{let o=document.createElement("p");o.textContent=e,t.appendChild(o)}}function w(t){let e;return t.type=="video/mp4"?(e=document.createElement("video"),e.controls=!0,e.type="video/mp4"):(t.type=="image/png"||t.type=="thumbsnail")&&(e=document.createElement("img"),e.type="image/png"),e.src="/files/"+t.location,console.log(e.src),e}function h(t){window.carouselPosition=0;let e;try{e=JSON.parse(t.srcElement.id)}catch{e=JSON.parse(t.srcElement.parentElement.id)}let s=!1;console.log(e),window.carouselMax=e.length-1;let l="<section class='slider-wrapper'><img src onerror='reloadCarousel(this.parentElement);'><button class='slide-arrow slide-arrow-prev' id='slide-arrow-prev' onclick='downCarousel(this)' style='display:block;position:absolute;top:50%;'>&#8249;</button><button style='position:absolute;top:50%;left:95%' class='slide-arrow slide-arrow-next' id='slide-arrow-next' onclick='upCarousel(this)'>&#8250;</button><ul class='slides-container' style:'list-style: none;' id='slides-container'>";for(let n=0;n<e.length;n++)if(e[n].type!="thumbsnail"){let a=w(e[n]);a.style.width="92.5%",a.style.height="auto";let c=document.createElement("div");c.append(a),l+='<li class="slide '+(s?n-1:n)+'slide" style="min-height:50%">',l+=c.innerHTML,l+="</li>"}else s=!0;l+="</ul></section>",g({title:"Visioneurs",body:l,button:"retour"}),document.getElementsByClassName("modal-dialog")[0].style.width="50%",console.log()}window.upCarousel=function(t){window.carouselPosition+=1,window.carouselPosition!=window.carouselMax-1?(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-prev")[0].disabled=!1):(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-next")[0].disabled=!0,t.parentElement.getElementsByClassName("slide-arrow-prev")[0].disabled=!1)};window.downCarousel=function(t){window.carouselPosition-=1,window.carouselPosition!=0?(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-next")[0].disabled=!1):(window.reloadCarousel(t.parentElement),t.parentElement.getElementsByClassName("slide-arrow-prev")[0].disabled=!0,t.parentElement.getElementsByClassName("slide-arrow-next")[0].disabled=!1)};window.reloadCarousel=function(t){window.carouselPosition==0&&(t.getElementsByClassName("slide-arrow-prev")[0].disabled=!0),window.carouselMax==1&&(t.getElementsByClassName("slide-arrow-next")[0].disabled=!0),console.log(window.carouselMax);for(let e=0;e<window.carouselMax;e++)console.log(e),e==window.carouselPosition?t.getElementsByClassName(e+"slide")[0].hidden=!1:t.getElementsByClassName(e+"slide")[0].hidden=!0};function b(t){const e=i(this).data("submission-id"),s=i(this).parent().parent(),o=s.find(".chal").text().trim(),l=s.find(".team").text().trim(),n=i(this).parent().parent();r({title:"Delete Submission",body:"Are you sure you want to delete correct submission from {0} for challenge {1}".format("<strong>"+u(l)+"</strong>","<strong>"+u(o)+"</strong>"),success:function(){d.api.delete_submission({submissionId:e}).then(function(a){a.success&&n.remove()})}})}function y(t){let e=i("input[data-submission-id]:checked").map(function(){return i(this).data("submission-id")}),s=e.length===1?"submission":"submissions";r({title:"Delete Submissions",body:`Are you sure you want to delete ${e.length} ${s}?`,success:function(){const o=[];for(var l of e)o.push(d.api.delete_submission({submissionId:l}));Promise.all(o).then(n=>{window.location.reload()})}})}function C(t){let e=i("input[data-submission-id]:checked").map(function(){return i(this).data("submission-id")}),s=e.length===1?"submission":"submissions";r({title:"Correct Submissions",body:`Are you sure you want to mark ${e.length} ${s} correct?`,success:function(){const o=[];for(var l of e){let n=d.fetch(`/api/v1/submissions/${l}`,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({type:"correct"})});o.push(n)}Promise.all(o).then(n=>{window.location.reload()})}})}function m(t){const e=new URLSearchParams(window.location.search);e.has("full")?e.delete("full"):e.set("full","true"),window.location.href=`${window.location.pathname}?${e.toString()}`}function E(t){let e=i(t.currentTarget),s=e.find("i"),o=e.parent().find("pre");o.hasClass("full-flag")?(o.text(o.attr("title").substring(0,42)+"..."),o.removeClass("full-flag"),s.addClass("fa-eye"),s.removeClass("fa-eye-slash")):(o.text(o.attr("title")),o.addClass("full-flag"),s.addClass("fa-eye-slash"),s.removeClass("fa-eye"))}function x(t){let o=i(t.currentTarget).parent().find("pre").attr("title");navigator.clipboard.writeText(o),i(t.currentTarget).tooltip({title:"Copied!",trigger:"manual"}),i(t.currentTarget).tooltip("show"),setTimeout(function(){i(t.currentTarget).tooltip("hide")},1500)}i(()=>{i("#show-full-flags-button").click(m),i("#show-short-flags-button").click(m),i(".show-flag").click(E),i(".copy-flag").click(x),i("#correct-flags-button").click(C),i(".delete-correct-submission").click(b),i("#submission-delete-button").click(y)});let p=document.getElementsByClassName("imageContainer");for(let t=0;t<p.length;t++)f(p[t]);
