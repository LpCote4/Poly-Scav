import{m as s,C as n}from"./index.5095421b.js";import{g as w,e as r,a as m}from"./index.e988da21.js";import"./echarts.54e741c1.js";import{e as g,h as c}from"./CommentBox.687d086b.js";window.Alpine=s;window.CTFd=n;window.ScoreboardDetail=0;window.standings=0;window.scoreboardListLoaded=!1;window.allImages=[];window.maxCount=0;window.maxCountIncrease=1;window.imageInit=!1;s.data("ScoreboardDetail",()=>({data:{},show:!0,async init(){window.standings=await n.pages.scoreboard.getScoreboard(),window.ScoreboardDetail=await n.pages.scoreboard.getScoreboardDetail(window.standings.length),console.log(window.ScoreboardDetail),console.log(window.standings);let a=w(n.config.userMode,window.standings);var o=document.getElementById("score-graph");r(o,a),this.show=window.standings.length>0}}));s.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async init(){const o=await(await n.fetch(`/api/v1/brackets?type=${n.config.userMode}`,{method:"GET"})).json();this.brackets=o.data;const e=await(await n.fetch("/api/v1/challenges",{method:"GET"})).json();console.log(e);let i={};for(let t=0;t<e.data.length;t++)i[e.data[t].id]=e.data[t].name;let l=m(window.ScoreboardDetail,window.standings,i);for(let t=0;t<l.length;t++)this.standings[t]=l[t]}}));s.data("LogImage",()=>({async init(){window.allImages.push(this.id),window.allImages.length>window.maxCount&&(document.getElementById(this.id).hidden=!0),window.allImages.length==window.maxCountIncrease&&(window.imageInit||(window.imageInit=!0,self.show10More()))}}));globalThis.show10More=async function(){let a=[];for(let e=window.maxCount;e<window.maxCount+window.maxCountIncrease;e++)a.push(window.allImages[e]),document.getElementById(window.allImages[e]).hidden=!1;const d=await(await n.fetch("/api/v1/teams?ids="+JSON.stringify(a),{method:"GET"})).json();for(let e=0;e<window.maxCountIncrease;e++){document.createElement("img");let i="data:text/plain;base64,"+atob(d.data[e].provided);i.length<5e3?document.getElementById(window.allImages[e+window.maxCount]).querySelector("#img").hidden=!0:(document.getElementById(window.allImages[e+window.maxCount]).querySelector("#img").src=i,document.getElementById(window.allImages[e+window.maxCount]).onclick=showLargeSubmissions)}window.maxCount+=window.maxCountIncrease};globalThis.showLargeSubmissions=function(a){let o=a.srcElement.parentElement.tagName=="TR"?a.srcElement.parentElement:a.srcElement.parentElement.parentElement;g({title:"Visioneurs",body:'<img src="'+o.querySelector("#img").src+'" style="width: 100%;" height="auto">',button:"retour",ids:o.id},c,n.user)};s.start();
