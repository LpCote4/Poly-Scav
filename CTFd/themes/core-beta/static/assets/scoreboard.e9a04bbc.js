import{m as w,C as l}from"./index.963d67df.js";import{g as c,e as u,a as h}from"./index.4fd5c917.js";import"./echarts.54e741c1.js";import{e as p,h as C}from"./CommentBox.d3ca2d7e.js";window.Alpine=w;window.CTFd=l;window.ScoreboardDetail=0;window.standings=0;window.nbStandings=0;window.scoreboardListLoaded=!1;window.allImages=[];window.maxCount=0;window.maxCountIncrease=5;window.imageInit=!1;window.theninit=0;w.data("ScoreboardDetail",()=>({data:{},show:!0,async init(){window.standings=await l.pages.scoreboard.getScoreboard(),window.ScoreboardDetail=await l.pages.scoreboard.getScoreboardDetail(window.standings.length),console.log("await over"),console.log("details"),console.log(window.standings);let e=c(l.config.userMode,window.standings);var t=document.getElementById("score-graph");console.log(e.series),u(t,e),console.log(e),this.show=window.standings.length>0}}));w.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async init(){if(window.standings.length!=0){const t=await(await l.fetch(`/api/v1/brackets?type=${l.config.userMode}`,{method:"GET"})).json();this.brackets=t.data;const o=await(await l.fetch("/api/v1/challenges",{method:"GET"})).json();let a={};for(let n=0;n<o.data.length;n++)a[o.data[n].id]=o.data[n].name;if(window.ScoreboardDetail==0||window.standings==0)this.init();else{let n=h(window.ScoreboardDetail,window.standings,a);for(let i=0;i<n.length;i++)this.standings[i]=n[i]}window.nbStandings=this.standings.length}}}));w.data("LogImage",()=>({async init(){if(console.log(this.standing),window.allImages.push(JSON.parse(this.id)[0].id),window.allImages.length>window.maxCount){let e=document.getElementById(this.id);this.type=="manual"&&(e.className+="inSubmission"),e.text="c_id:"+this.challenge_id+"t_id:"+this.team_id,e.id=JSON.parse(this.id)[0].id,e.hidden=!0}(window.allImages.length==window.maxCountIncrease||window.allImages.length==window.nbStandings)&&(window.imageInit||window.allImages.length!=0&&(window.imageInit=!0,self.show10More()))}}));globalThis.show10More=async function(e){let t=[];for(let a=window.maxCount;a<window.maxCount+window.maxCountIncrease;a++)window.allImages[a]&&(t.push(window.allImages[a]),document.getElementById(window.allImages[a]).hidden=!1);const o=await(await l.fetch("/api/v1/teams?ids="+JSON.stringify(t),{method:"GET"})).json();for(let a=0;a<window.maxCountIncrease;a++)if(maxCount+a<window.allImages.length){let n=o.data[a].provided,i=document.getElementById(window.allImages[a+window.maxCount]),d;try{d=JSON.parse(n)}catch{}if(d){let g=!1;for(let r=0;r<d.length;r++)if(d[r].type=="thumbsnail"){g=!0;let m=createMediaElement(d[r]);m.style.width="50px",m.style.height="auto",i.getElementsByClassName("imageContainer")[0].appendChild(m),i.getElementsByClassName("imageContainer")[0].onclick=showLargeSubmissions,i.value=n}if(!g){let r=document.createElement("p");r.textContent="No thumbsnail Available for the current media",i.getElementsByClassName("imageContainer")[0].appendChild(r)}}}window.maxCount+=window.maxCountIncrease,window.allImages.length<=window.maxCount&&(document.getElementById("plus-btn").disabled=!0)};globalThis.createMediaElement=function(e){let t;return e.type=="video/mp4"?(t=document.createElement("video"),t.controls=!0,t.type="video/mp4"):(e.type=="image/png"||e.type=="thumbsnail")&&(t=document.createElement("img"),t.type="image/png"),t.src="/files/"+e.location,t};globalThis.showLargeSubmissions=function(e){window.carouselPosition=0;let t,s;try{t=JSON.parse(e.srcElement.parentElement.value),s=e.srcElement.parentElement}catch{t=JSON.parse(e.srcElement.parentElement.parentElement.value),s=e.srcElement.parentElement.parentElement}let o=!1;window.carouselMax=t.length-1;let a="<section class='slider-wrapper'><ul class='slides-container list-unstyled' style:'list-style: none !important;' id='slides-container'>";for(let n=0;n<t.length;n++)if(t[n].type!="thumbsnail"){let i=createMediaElement(t[n]);i.style.width="100%",i.style.objectFit="contain",i.style.height="500px";let d=document.createElement("div");d.append(i),a+='<li class="slide '+(o?n-1:n)+'slide" style="min-height:50%">',a+=d.innerHTML,a+="</li>"}else o=!0;a+="</ul></section>",a+="<img src onerror='reloadCarousel(this.parentElement);'></img>",a+=`<button class='btn btn-primary carousel__navigation-button slide-arrow-prev' id='slide-arrow-prev' onclick='downCarousel(this)' style='display:block;position:absolute;top:40%;left:1rem;'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(15,0) rotate(0)"></path></svg></button>`,a+=`<button style='position:absolute;top:40%;right:1rem;' class='btn btn-primary carousel__navigation-button slide-arrow-next' id='slide-arrow-next' onclick='upCarousel(this)'><svg viewBox="0 0 100 100"><path d="M 50,0 L 60,10 L 20,50 L 60,90 L 50,100 L 0,50 Z" class="arrow" fill="white" transform="translate(85,100) rotate(180)"></path></svg></button>`,console.log(s.text),p({title:"Visioneurs",body:a,button:"retour",ids:s.text,additionalClassMain:"FullSizeCarousel"},C,l.user),document.getElementsByClassName("modal-dialog")[0].style.listStyle="none"};window.upCarousel=function(e){window.carouselPosition+=1,window.carouselPosition!=window.carouselMax-1?(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1):(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!0,e.parentElement.getElementsByClassName("slide-arrow-prev")[0].hidden=!1)};window.downCarousel=function(e){window.carouselPosition-=1,window.carouselPosition!=0?(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1):(window.reloadCarousel(e.parentElement),e.parentElement.getElementsByClassName("slide-arrow-prev")[0].hiddend=!0,e.parentElement.getElementsByClassName("slide-arrow-next")[0].hidden=!1)};window.reloadCarousel=function(e){window.carouselPosition==0&&(e.getElementsByClassName("slide-arrow-prev")[0].hidden=!0),window.carouselMax==1&&(e.getElementsByClassName("slide-arrow-next")[0].hidden=!0);for(let t=0;t<window.carouselMax;t++)if(t==window.carouselPosition)e.getElementsByClassName(t+"slide")[0].hidden=!1;else{e.getElementsByClassName(t+"slide")[0].hidden=!0;let s=e.getElementsByClassName(t+"slide")[0].firstChild;s.nodeName=="VIDEO"&&s.pause()}};w.start();
